# Kaizala-API
## Python Snipet to send message using Kaizala API

### Basic Requirements and Operations:
    -After creating account in Kaizala using mobile number, Require elements can be created from link 
      (https://manage.kaiza.la/), 
    so login will lead us home page of kaizala management page.

#### At first, 
    A Kaizala "Connector", is required which can be created from "Extension->Connectors". 
    After creation, Add it to "MyCustomGroup" and Generate Token. 
    [here "MyCustomGroup" is a group i am assuming to send the message using API]

#### Upon Creation of connector, We got 3 elements from "connector", As following:
	 1.token [this is user/connector token]
	 2.applicationId
	 3.applicationSecret

#### Now, go to Groups->"MyCustomGroup":
    And add the connector to it along with Allowing the connector to send announcement in group by Admin of 
    "MyCustomGroup". While Inside groups, collect "groupId" for "MyCustomGroup" from browser URL
    [https://manage.kaiza.la/Group/Conversation/groupId].
    "groupid" will be the last section of link and is one of mandatory elements for sending sms using API.

#### At this stage we have all required info and elements To Send SMS in "MyCustomGroup". Using these element following Python program will can send sms. Code executed into two steps.

###### In Steps One: 
    We will generate "accessToken" using "GET" method using link: [https://api.kaiza.la/v1/accessToken"]
    Note: This "accessToken" generated by "MyCustomGroup" and we request for it using token of connector   
###### In Steps Two:
    From retrived "accessToken", we will derive
	     1.  EndPoinUrl
	     2.  Token (generated by using connector token)

###### Finally, Including above 2 elements, we use "groupId" to send message using method "POST" Using
      URL ["https://{endpoint-url}/v1/groups/{group-id}/messages"]

##### PythonSnip

```
#Modify all veriable data as yours
import requests
import json

def SendSMS_Kaizila(msg):
    #Section 1
	url_AccToken = "https://api.kaiza.la/v1/accessToken"
    body1 = ""
    headers = {
        'applicationId':"qqqyyyy-xxxx-xxxx-1111-06bc000001q1",
        'applicationSecret':"0101010101",
		'refreshToken':"Paste the user Token from connector"
        'cache-control':"no-cache"
        }
    response = requests.request("GET", url_AccToken, data=body1, headers=headers)
    
	#Section 2
	JsonData = json.loads(response.text)
    Tokn = JsonData["accessToken"]
    EndPoinUrl = JsonData["endpointUrl"]
    groupId = "xxx73ifsafxxxxxxyyyxxxxxx" 
    Url_SendSMS = EndPoinUrl + "v1/groups/"+ groupId +"/messages"
    hd = {
        'accessToken': Tokn
        }
    bdy = {
        "message": msg,
        "sendToAllSubscribers" : "True"
        }
    resp = requests.request("POST", Url_SendSMS, data=bdy, headers=hd)
    print(resp.text)

txt = 'Sending SMS Successfull using Kaizila API' + '\n' + "new Line using '\ n \n'" + "Sign & Test is OK"
SendSMS_Kaizila(txt)

#if Opertion Successful then output will be as following
#print output = {"referenceId":"0de2f027-bf2b-407d-903e-a3fba0ee33b1"}
```
